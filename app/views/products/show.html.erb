<div class="container mt-5">
  <div class="row">
    <div class="col-md-6">
      <% if @product.main_photo.attached? %>
        <%= image_tag @product.main_photo, class: "img-fluid rounded", alt: @product.name %>
      <% else %>
        <p class="text-muted">No photo available</p>
      <% end %>
    </div>

    <div class="col-md-6">
      <h1 class="text-primary"><%= @product.name %></h1>
      <p><strong>Category:</strong> <%= @product.product_category.name %></p>
      <p><strong>Tags:</strong> <%= @product.tags.map(&:name).join(", ") %></p>
      <p><strong>SKU:</strong> <%= @product.sku %></p>
      <p><strong>Description:</strong> <%= @product.description.presence || "No description available" %></p>
      <p><strong>Price:</strong> <%= number_to_currency(@product.price) %></p>
      <p><strong>Quantity:</strong> <%= @product.quantity %></p>
      <%= button_to "Add to Cart", add_item_cart_path(product_id: @product.id), method: :post, class: "btn btn-primary" %>
    </div>
  </div>

  <% if @similar_products.any? %>
  <div class="mt-5">
    <h3>Similar Products</h3>
    <div class="row">
      <% @similar_products.each do |similar_product| %>
        <div class="col-md-4 mb-4">
          <div class="card">
            <% if similar_product.main_photo.attached? %>
              <%= link_to image_tag(similar_product.main_photo, class: "card-img-top", alt: similar_product.name), product_path(similar_product) %>
            <% end %>
            <div class="card-body">
              <h5 class="card-title">
                <%= link_to similar_product.name, product_path(similar_product), class: "text-decoration-none" %>
              </h5>
              <p class="card-text"><strong>Price:</strong> <%= number_to_currency(similar_product.price) %></p>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <% end %>
</div>
